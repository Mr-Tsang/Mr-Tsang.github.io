(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{802:function(t,s,n){"use strict";n.r(s);var a=n(14),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey},scopedSlots:t._u([{key:"abstract",fn:function(){return[s("p",[t._v("Event Loopå³äº‹ä»¶å¾ªç¯ï¼Œæ˜¯æŒ‡æµè§ˆå™¨æˆ–Nodeçš„ä¸€ç§è§£å†³javaScriptå•çº¿ç¨‹è¿è¡Œæ—¶ä¸ä¼šé˜»å¡çš„ä¸€ç§æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨å¼‚æ­¥çš„åŸç†ã€‚")]),t._v(" "),s("p",[t._v("äº‹ä»¶å¾ªç¯çš„è¿›ç¨‹æ¨¡å‹ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é€‰æ‹©å½“å‰è¦æ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œé€‰æ‹©ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ€å…ˆè¿›å…¥çš„ä»»åŠ¡ï¼Œå¦‚æœä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºå³nullï¼Œåˆ™æ‰§è¡Œè·³è½¬åˆ°å¾®ä»»åŠ¡ï¼ˆMicroTaskï¼‰çš„æ‰§è¡Œæ­¥éª¤")]),t._v(" "),s("li",[t._v("å°†äº‹ä»¶å¾ªç¯ä¸­çš„ä»»åŠ¡è®¾ç½®ä¸ºå·²é€‰æ‹©ä»»åŠ¡")]),t._v(" "),s("li",[t._v("æ‰§è¡Œä»»åŠ¡")]),t._v(" "),s("li",[t._v("å°†äº‹ä»¶å¾ªç¯ä¸­å½“å‰è¿è¡Œä»»åŠ¡è®¾ç½®ä¸ºnull")]),t._v(" "),s("li",[t._v("å°†å·²ç»è¿è¡Œå®Œæˆçš„ä»»åŠ¡ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­åˆ é™¤")]),t._v(" "),s("li",[t._v("microtasksæ­¥éª¤ï¼šè¿›å…¥microtaskæ£€æŸ¥ç‚¹")]),t._v(" "),s("li",[t._v("æ›´æ–°ç•Œé¢æ¸²æŸ“")]),t._v(" "),s("li",[t._v("è¿”å›ç¬¬ä¸€æ­¥")])])]},proxy:!0}])},[s("h2",{attrs:{id:"_1-ä»‹ç»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä»‹ç»"}},[t._v("#")]),t._v(" 1. ä»‹ç»")]),t._v(" "),s("p",[t._v("Event Loopå³äº‹ä»¶å¾ªç¯ï¼Œæ˜¯æŒ‡æµè§ˆå™¨æˆ–Nodeçš„ä¸€ç§è§£å†³javaScriptå•çº¿ç¨‹è¿è¡Œæ—¶ä¸ä¼šé˜»å¡çš„ä¸€ç§æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨å¼‚æ­¥çš„åŸç†ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸€å¥è¯æè¿°ï¼šEventLoopä¼šä¸æ–­çš„å»æ£€æŸ¥call Stack(è°ƒç”¨æ ˆ)ä¸­æ˜¯å¦æœ‰å‡½æ•°è¦æ‰§è¡Œ")])]),t._v(" "),s("p",[s("strong",[t._v("äº‹ä»¶å¾ªç¯çš„è¿›ç¨‹æ¨¡å‹")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é€‰æ‹©å½“å‰è¦æ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œé€‰æ‹©ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ€å…ˆè¿›å…¥çš„ä»»åŠ¡ï¼Œå¦‚æœä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºå³nullï¼Œåˆ™æ‰§è¡Œè·³è½¬åˆ°å¾®ä»»åŠ¡ï¼ˆMicroTaskï¼‰çš„æ‰§è¡Œæ­¥éª¤")]),t._v(" "),s("li",[t._v("å°†äº‹ä»¶å¾ªç¯ä¸­çš„ä»»åŠ¡è®¾ç½®ä¸ºå·²é€‰æ‹©ä»»åŠ¡")]),t._v(" "),s("li",[t._v("æ‰§è¡Œä»»åŠ¡")]),t._v(" "),s("li",[t._v("å°†äº‹ä»¶å¾ªç¯ä¸­å½“å‰è¿è¡Œä»»åŠ¡è®¾ç½®ä¸ºnull")]),t._v(" "),s("li",[t._v("å°†å·²ç»è¿è¡Œå®Œæˆçš„ä»»åŠ¡ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­åˆ é™¤")]),t._v(" "),s("li",[t._v("microtasksæ­¥éª¤ï¼šè¿›å…¥microtaskæ£€æŸ¥ç‚¹")]),t._v(" "),s("li",[t._v("æ›´æ–°ç•Œé¢æ¸²æŸ“")]),t._v(" "),s("li",[t._v("è¿”å›ç¬¬ä¸€æ­¥")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/js/js-1.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("æ‰§è¡Œè¿›å…¥å¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰æ£€æŸ¥æ—¶ï¼Œç”¨æˆ·ä»£ç†ä¼šæ‰§è¡Œ")]),t._v("ğŸ‘‡")]),t._v(" "),s("ul",[s("li",[t._v("è®¾ç½®microtaskæ£€æŸ¥ç‚¹æ ‡å¿—ä¸ºtrue")]),t._v(" "),s("li",[t._v("å½“äº‹ä»¶å¾ªç¯microtaskæ‰§è¡Œä¸ä¸ºç©ºæ—¶ï¼šé€‰æ‹©ä¸€ä¸ªæœ€å…ˆè¿›å…¥çš„microtaské˜Ÿåˆ—çš„microtaskï¼Œå°†äº‹ä»¶å¾ªç¯çš„microtaskè®¾ç½®ä¸ºå·²é€‰æ‹©çš„microtaskï¼Œè¿è¡Œmicrotaskï¼Œå°†å·²ç»æ‰§è¡Œå®Œæˆçš„microtaskä¸ºnullï¼Œç§»å‡ºmicrotaskä¸­çš„microtask")]),t._v(" "),s("li",[t._v("æ¸…ç†IndexDBäº‹åŠ¡")]),t._v(" "),s("li",[t._v("è®¾ç½®è¿›å…¥microtaskæ£€æŸ¥ç‚¹çš„æ ‡å¿—ä¸ºfalse")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/js/js-2.gif",alt:""}})]),t._v(" "),s("p",[t._v("åœ¨nodeä¸­ï¼Œäº‹ä»¶å¾ªç¯è¡¨ç°å‡ºçš„çŠ¶æ€ä¸æµè§ˆå™¨ä¸­å¤§è‡´ç›¸åŒã€‚ä¸åŒçš„æ˜¯nodeä¸­æœ‰ä¸€å¥—è‡ªå·±çš„æ¨¡å‹ã€‚nodeä¸­äº‹ä»¶å¾ªç¯çš„å®ç°æ˜¯ä¾é çš„libuvå¼•æ“ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("Node çš„ EventLoop ä¸€å…±åˆ†ä¸º6ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªç»†èŠ‚")]),t._v("ğŸ‘‡")]),t._v(" "),s("ul",[s("li",[t._v("timers: è¿™ä¸ªé˜¶æ®µæ‰§è¡Œå®šæ—¶å™¨é˜Ÿåˆ—ä¸­çš„å›è°ƒå¦‚ setTimeout() å’Œ setInterval()")]),t._v(" "),s("li",[t._v("I/O callbacks: è¿™ä¸ªé˜¶æ®µæ‰§è¡Œå‡ ä¹æ‰€æœ‰çš„å›è°ƒã€‚ä½†æ˜¯ä¸åŒ…æ‹¬closeäº‹ä»¶ï¼Œå®šæ—¶å™¨å’ŒsetImmediate()çš„å›è°ƒ")]),t._v(" "),s("li",[t._v("idle, prepare: è¿™ä¸ªé˜¶æ®µä»…åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œå¯ä»¥ä¸å¿…ç†ä¼š")]),t._v(" "),s("li",[t._v("poll: ç­‰å¾…æ–°çš„I/Oäº‹ä»¶ï¼Œnodeåœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ä¼šé˜»å¡åœ¨è¿™é‡Œ")]),t._v(" "),s("li",[t._v("check: setImmediate()çš„å›è°ƒä¼šåœ¨è¿™ä¸ªé˜¶æ®µæ‰§è¡Œ")]),t._v(" "),s("li",[t._v("close callbacks: ä¾‹å¦‚socket.on('close', ...)è¿™ç§closeäº‹ä»¶çš„å›è°ƒ")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”Œâ”€>â”‚        timers         â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  â”‚     I/O callbacks     â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  â”‚     idle, prepare     â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   incoming:   â”‚\nâ”‚  â”‚         poll          â”‚<â”€â”€connectionsâ”€â”€â”€     â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   data, etc.  â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nâ”‚  â”‚        check          â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ””â”€â”€â”¤    close callbacks    â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n")])])]),s("p",[s("strong",[t._v("nodeä¸­çš„äº‹ä»¶å¾ªç¯çš„é¡ºåº")]),t._v("ï¼šå¤–éƒ¨è¾“å…¥æ•°æ®--\x3eè½®è¯¢é˜¶æ®µ(poll)--\x3eæ£€æŸ¥é˜¶æ®µ(check)--\x3eå…³é—­äº‹ä»¶å›è°ƒé˜¶æ®µ(close callback)--\x3eå®šæ—¶å™¨æ£€æµ‹é˜¶æ®µ(timer)--\x3eI/Oäº‹ä»¶å›è°ƒé˜¶æ®µ(I/O callbacks)--\x3eé—²ç½®é˜¶æ®µ(idle, prepare)--\x3eè½®è¯¢é˜¶æ®µ...")]),t._v(" "),s("h2",{attrs:{id:"_2-ä»»åŠ¡é˜Ÿåˆ—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä»»åŠ¡é˜Ÿåˆ—"}},[t._v("#")]),t._v(" 2. ä»»åŠ¡é˜Ÿåˆ—")]),t._v(" "),s("h3",{attrs:{id:"_2-1-è°ƒç”¨æ ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-è°ƒç”¨æ ˆ"}},[t._v("#")]),t._v(" 2.1 è°ƒç”¨æ ˆ")]),t._v(" "),s("p",[t._v("è°ƒç”¨æ ˆæ˜¯ä¸€ä¸ªå…ˆè¿›åå‡ºçš„å †æ ˆã€‚")]),t._v(" "),s("p",[t._v("å¸¸è§:æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯å †æ ˆè·Ÿè¸ªï¼Œæµè§ˆå™¨åœ¨è°ƒç”¨å †æ ˆä¸­æŸ¥æ‰¾å‡½æ•°åï¼Œä»¥é€šçŸ¥æ˜¯å“ªä¸ªå‡½æ•°å‘èµ·äº†å½“å‰è°ƒç”¨")]),t._v(" "),s("h3",{attrs:{id:"_2-2-åŒæ­¥ä»»åŠ¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-åŒæ­¥ä»»åŠ¡"}},[t._v("#")]),t._v(" 2.2 åŒæ­¥ä»»åŠ¡")]),t._v(" "),s("p",[t._v("åœ¨ä¸»çº¿ç¨‹ä¸Šæ’é˜Ÿæ‰§è¡Œçš„ä»»åŠ¡ï¼Œåªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ‰èƒ½æ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_2-3-å¼‚æ­¥ä»»åŠ¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-å¼‚æ­¥ä»»åŠ¡"}},[t._v("#")]),t._v(" 2.3 å¼‚æ­¥ä»»åŠ¡")]),t._v(" "),s("p",[t._v("ä¸è¿›å…¥ä¸»çº¿ç¨‹ã€è€Œè¿›å…¥â€ä»»åŠ¡é˜Ÿåˆ—â€çš„ä»»åŠ¡ï¼Œå½“ä¸»çº¿ç¨‹ä¸­çš„ä»»åŠ¡è¿è¡Œå®Œäº†ï¼Œæ‰ä¼šä»â€ä»»åŠ¡é˜Ÿåˆ—â€å–å‡ºå¼‚æ­¥ä»»åŠ¡æ”¾å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚\nå¼‚æ­¥ä»»åŠ¡åˆ†ä¸ºï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å®ä»»åŠ¡\n"),s("ul",[s("li",[t._v("å®šæ—¶å™¨ï¼ˆsetTimeout()ã€setInterval()ã€setImmediate()ç­‰ï¼‰")]),t._v(" "),s("li",[t._v("äº‹ä»¶ç»‘å®š")]),t._v(" "),s("li",[t._v("ajax")]),t._v(" "),s("li",[t._v("å›è°ƒå‡½æ•°")]),t._v(" "),s("li",[t._v("Nodeä¸­fså¯ä»¥è¿›è¡Œå¼‚æ­¥çš„I/Oæ“ä½œ")])])]),t._v(" "),s("li",[t._v("å¾®ä»»åŠ¡\n"),s("ul",[s("li",[t._v("Promise(async/await) => Promiseå¹¶ä¸æ˜¯å®Œå…¨çš„åŒæ­¥ï¼Œåœ¨promiseä¸­æ˜¯åŒæ­¥ä»»åŠ¡ï¼Œæ‰§è¡Œresolveæˆ–è€…rejectå›è°ƒçš„æ—¶å€™ï¼Œæ­¤æ—¶æ˜¯å¼‚æ­¥æ“ä½œï¼Œä¼šå…ˆå°†then/catchç­‰æ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚å½“ä¸»æ ˆå®Œæˆåï¼Œæ‰ä¼šå†å»è°ƒç”¨resolve/rejectæ–¹æ³•æ‰§è¡Œ")]),t._v(" "),s("li",[t._v("process.nextTick ï¼ˆnodeä¸­å®ç°çš„apiï¼ŒæŠŠå½“å‰ä»»åŠ¡æ”¾åˆ°ä¸»æ ˆæœ€åæ‰§è¡Œï¼Œå½“ä¸»æ ˆæ‰§è¡Œå®Œï¼Œå…ˆæ‰§è¡ŒnextTickï¼Œå†åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­æ‰¾ï¼‰")]),t._v(" "),s("li",[t._v("MutationObserver ï¼ˆåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ MutationObserver å®ƒä¼šåœ¨æŒ‡å®šçš„DOMå‘ç”Ÿå˜åŒ–æ—¶è¢«è°ƒç”¨ï¼‰")])])])]),t._v(" "),s("p",[t._v("å¾ªç¯æœºåˆ¶çš„ä¸åŒé˜Ÿåˆ—ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("äº‹ä»¶å¾ªç¯ï¼š ä»»åŠ¡é˜Ÿåˆ—åˆå§‹åŒ–å®Œæˆåï¼Œäº‹ä»¶å¾ªç¯ä¼šæ— é™æ¬¡åœ°æ‰§è¡Œï¼Œä¸€è½®åˆä¸€è½®ã€‚åªæœ‰å¼‚æ­¥ä»»åŠ¡çš„å› è°ƒå‡½æ•°é˜Ÿåˆ—æ¸…ç©ºäº†ï¼Œæ‰ä¼šåœæ­¢æ‰§è¡Œ")]),t._v(" "),s("li",[t._v("pollé˜Ÿåˆ—ï¼šç”¨äºå¤„ç†I/Oæ“ä½œçš„å›è°ƒï¼Œäº‹ä»¶å¾ªç¯ä¼šåœ¨ç©ºé—²çš„æ—¶å€™æš‚åœï¼Œç­‰å¾…æ–°çš„I/Oäº‹ä»¶ã€‚(ä¸ºäº†æ›´ å¿«å“åº”å®¢æˆ·ç«¯è¯·æ±‚)")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("bar")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bar'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("baz")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'baz'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("foo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("baz")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n *åŒæ­¥ä»£ç æ‰§è¡Œ\n *å®šæ—¶å™¨ä¸ºå¼‚æ­¥ä»»åŠ¡ï¼Œè¢«æ¨å…¥åˆ°å¼‚æ­¥æ¨¡å—æ‰§è¡Œ\n *åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œfooå‡ºæ ˆï¼Œäº‹ä»¶å¾ªç¯å¯åŠ¨\n *timeré˜Ÿåˆ— => pollé˜Ÿåˆ—ï¼ˆåˆ¤æ–­ç­‰å¾…ï¼‰\n *10æ¯«ç§’ä¹‹åå®šæ—¶å™¨åˆ°è¾¾é˜ˆå€¼ï¼Œå›è°ƒå‡½æ•°è¿›å…¥timeré˜Ÿåˆ—\n *setTimeoutçš„å›è°ƒå‡½æ•°æ¨å…¥è°ƒç”¨æ ˆä¸­æ‰§è¡Œ\n*/")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è„šæœ¬å¼€å§‹'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å®šæ—¶å™¨'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// I/Oæ“ä½œ: å‡è®¾ è¯»å–æ–‡æ¡£å†…å®¹ï¼Œè€—æ—¶20ms")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setImmediate'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è„šæœ¬ç»“æŸ'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n *åŒæ­¥ä»£ç æ‰§è¡Œ\n *setImmediateæ˜¯nodeç‹¬æœ‰çš„apiï¼Œè¢«å®ƒåŒ…è£¹çš„å‡½æ•°ä¼šç›´æ¥è¿›å…¥åˆ°äº‹ä»¶å¾ªç¯çš„checké˜Ÿåˆ—\n *åœ¨pollé˜»å¡ä¹‹åå‘ç°ï¼Œchecké˜Ÿåˆ—æœ‰å›è°ƒå‡½æ•°ï¼Œåˆ™æ¨å…¥æ ˆä¸­æ‰§è¡Œ\n *è‹¥æ“ä½œå°äº10msåˆ™ä¼šåœ¨pollé˜Ÿåˆ—ç»§ç»­åˆ¤æ–­ç­‰å¾…\n *åˆ°è¾¾10msæ—¶ï¼Œå®šæ—¶å™¨çš„å›è°ƒå‡½æ•°è¿›å…¥timeré˜Ÿåˆ—ï¼Œç»§ç»­æ¨å…¥æ ˆä¸­æ‰§è¡Œ\n *pollé˜Ÿåˆ—ç»§ç»­åˆ¤æ–­ç­‰å¾…ï¼Œå†è¿‡10msåˆ™æ‰§è¡ŒI/Oå›è°ƒå‡½æ•°\n*/")]),t._v("\n")])])]),s("p",[t._v("æµ‹è¯•ä¸€ä¸‹ğŸ‘‡ï¼š")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"åŒæ­¥ä»»åŠ¡1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asyn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("mac")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"åŒæ­¥ä»»åŠ¡2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mac"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mac"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Promiseä¸­çš„åŒæ­¥ä»»åŠ¡"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Promiseä¸­å›è°ƒçš„å¼‚æ­¥å¾®ä»»åŠ¡"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å¼‚æ­¥ä»»åŠ¡ä¸­çš„å®ä»»åŠ¡"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®šæ—¶å™¨ä¸­çš„å®šæ—¶å™¨ï¼ˆå®ä»»åŠ¡ï¼‰"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asyn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®šæ—¶å™¨ä¼ é€’ä»»åŠ¡"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å®šæ—¶å™¨ä¸­çš„:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asyn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"åŒæ­¥ä»»åŠ¡3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ‰“å°é¡ºåºï¼š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n *åŒæ­¥ä»»åŠ¡1\n *åŒæ­¥ä»»åŠ¡2\n *Promiseä¸­çš„åŒæ­¥ä»»åŠ¡\n *åŒæ­¥ä»»åŠ¡3\n *Promiseä¸­å›è°ƒçš„å¼‚æ­¥å¾®ä»»åŠ¡\n *å¼‚æ­¥ä»»åŠ¡ä¸­çš„å®ä»»åŠ¡\n *åŒæ­¥ä»»åŠ¡2\n *å®šæ—¶å™¨ä¼ é€’ä»»åŠ¡\n *Promiseä¸­çš„åŒæ­¥ä»»åŠ¡\n *å®šæ—¶å™¨ä¸­çš„: Promiseä¸­å›è°ƒçš„å¼‚æ­¥å¾®ä»»åŠ¡\n *å®šæ—¶å™¨ä¸­çš„å®šæ—¶å™¨ï¼ˆå®ä»»åŠ¡ï¼‰\n*/")]),t._v("\n")])])]),s("p",[t._v("æ‰§è¡Œæ­¥éª¤æ€»ç»“ï¼šå…ˆåŒæ­¥ä»»åŠ¡ï¼Œå†å¼‚æ­¥ä»»åŠ¡ï¼Œå¼‚æ­¥ä»»åŠ¡åˆåˆ†å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡ï¼Œå…ˆå¾®ä»»åŠ¡å†å®ä»»åŠ¡")]),t._v(" "),s("h3",{attrs:{id:"_2-4-settimeoutå’Œsetimmediate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-settimeoutå’Œsetimmediate"}},[t._v("#")]),t._v(" 2.4 setTimeoutå’ŒsetImmediate")]),t._v(" "),s("p",[t._v("ç”±äº setTimeout åœ¨ timers é˜¶æ®µæ‰§è¡Œï¼Œè€Œ setImmediate åœ¨ check é˜¶æ®µæ‰§è¡Œã€‚ç†è®ºä¸Šï¼Œ"),s("strong",[t._v("setTimeout ä¼šæ—©äº setImmediateå®Œæˆ")]),t._v("ã€‚")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// timeré˜Ÿåˆ—")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//checké˜Ÿåˆ—")]),t._v("\n")])])]),s("p",[t._v("ğŸ‘†ä»£ç åº”è¯¥å…ˆè¾“å‡º1ï¼Œå†è¾“å‡º2ï¼Œä½†æ˜¯å®é™…æ‰§è¡Œçš„æ—¶å€™ï¼Œç»“æœå´æ˜¯ä¸ç¡®å®šï¼Œæœ‰æ—¶è¿˜ä¼šå…ˆè¾“å‡º2ï¼Œå†è¾“å‡º 1")]),t._v(" "),s("ul",[s("li",[t._v("å› ä¸ºsetTimeoutçš„ç¬¬äºŒä¸ªå‚æ•°é»˜è®¤ä¸º0ã€‚ä½†æ˜¯å®é™…ä¸Šï¼ŒNode åšä¸åˆ°0æ¯«ç§’ï¼Œæœ€å°‘ä¹Ÿéœ€è¦1æ¯« ç§’ï¼Œæ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œç¬¬äºŒä¸ªå‚æ•°çš„å–å€¼èŒƒå›´åœ¨1æ¯«ç§’åˆ°2147483647æ¯«ç§’ä¹‹é—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ setTimeout(f, 0)ç­‰åŒäºsetTimeout(f, 1)")]),t._v(" "),s("li",[t._v("å®é™…æ‰§è¡Œçš„æ—¶å€™ï¼Œè¿›å…¥äº‹ä»¶å¾ªç¯ä»¥åï¼Œå–å†³äºç³»ç»Ÿå½“æ—¶çš„çŠ¶å†µã€‚å¦‚æœç³»ç»Ÿè¿è¡Œè¶³å¤Ÿå¿«ï¼Œæ²¡åˆ°1æ¯«ç§’ï¼Œå®šæ—¶å™¨è¿˜æ¥ä¸åŠå°†å›è°ƒå‡½æ•°åŠ å…¥åˆ°timeré˜Ÿåˆ—å½“ä¸­ï¼Œé‚£ä¹ˆ timers é˜¶æ®µå°±ä¼šè·³è¿‡ï¼Œè¿›å…¥ check é˜¶æ®µï¼Œå…ˆæ‰§è¡ŒsetImmediateçš„å›è°ƒå‡½æ•°")])]),t._v(" "),s("p",[t._v("ä½†æ˜¯ï¼Œä¸‹é¢çš„ä»£ç ä¸€å®šæ˜¯å…ˆè¾“å‡º2ï¼Œå†è¾“å‡º1ğŸ‘‡")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("constfs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("I/Oæ“ä½œçš„å›è°ƒåœ¨pollé˜¶æ®µè¢«æ‰§è¡Œï¼ŒsetTimeoutè¿›å…¥timeré˜Ÿåˆ—ï¼ŒsetImmediateè¿›å…¥checké˜Ÿåˆ—ï¼Œæ­¤æ—¶äº‹ä»¶å¾ªç¯å¤„äºpollé˜¶æ®µï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œè°ƒç”¨checké˜Ÿåˆ—ä¸­çš„å‡½æ•°ï¼Œç„¶åå†è°ƒç”¨timeré˜Ÿåˆ—ä¸­çš„å‡½æ•° å› æ­¤"),s("strong",[t._v("setImmediateæ€»ä¼šæ—©äºsetTimeoutæ‰§è¡Œ")]),t._v("ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_2-5-process-nexttick"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-process-nexttick"}},[t._v("#")]),t._v(" 2.5 process.nextTick")]),t._v(" "),s("p",[t._v("è™½ç„¶æœ‰å¼‚æ­¥çš„ç‰¹æ€§ï¼Œä½†æ˜¯å¹¶ä¸å±äºäº‹ä»¶å¾ªç¯æœºåˆ¶çš„ä¸€éƒ¨åˆ†ã€‚\nåœ¨nodeçš„å¼‚æ­¥æ¨¡å—ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„nextTické˜Ÿåˆ—ï¼Œè¿™ä¸ªé˜Ÿåˆ—çš„ä¼˜å…ˆçº§æ¯”äº‹ä»¶å¾ªç¯æ›´é«˜ï¼Œæ‰€ä»¥æ€»ä¼šåœ¨äº‹ ä»¶å¾ªç¯ä¹‹å‰è¢«è°ƒç”¨ã€‚")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'åŒæ­¥ä»£ç '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprocess"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nextTick"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n *å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç \n *å®šæ—¶å™¨å›è°ƒå‡½æ•°ã€nextTickå›è°ƒå‡½æ•°ç›´æ¥è¿›å…¥å¯¹åº”é˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œ\n *åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œåœ¨å¯åŠ¨äº‹ä»¶å¾ªç¯ä¹‹å‰ï¼Œnodeä¼šå…ˆæ£€æŸ¥nextTické˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ä»»åŠ¡\n *æ‰§è¡ŒnextTickçš„å›è°ƒå‡½æ•°\n *äº‹ä»¶å¾ªç¯å¯åŠ¨ï¼Œæ‰§è¡ŒTimerä¸­çš„å›è°ƒä»»åŠ¡\n */")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'åŒæ­¥ä»£ç '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nPromise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"promise"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nprocess"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nextTick"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setImmediate'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n * å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç \n * promiseå›è°ƒå‡½æ•°ã€nextTickå›è°ƒå‡½æ•°ã€setImmediateå›è°ƒå‡½æ•°è¿›å…¥å¯¹åº”é˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œ\n * åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œåœ¨å¯åŠ¨äº‹ä»¶å¾ªç¯ä¹‹å‰ï¼Œnodeä¼šå…ˆæ£€æŸ¥nextTické˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ä»»åŠ¡\n * æ‰§è¡ŒnextTickçš„å›è°ƒå‡½æ•°\n * æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å›è°ƒå‡½æ•°\n * äº‹ä»¶å¾ªç¯å¯åŠ¨ï¼Œæ‰§è¡ŒTimerä¸­çš„å›è°ƒä»»åŠ¡\n*/")]),t._v("\n")])])]),s("p",[t._v("process.nextTick()å…ˆäºPromise.then()æ‰§è¡Œ, setTimeout()ä¸setImmediate()æ‰§è¡Œé¡ºåºå–å†³äºsetTimeoutçš„æ‰§è¡Œå‘¨æœŸä¸è®¾å¤‡æ€§èƒ½")]),t._v(" "),s("p",[t._v("æ€»ç»“ï¼šåŒæ­¥ä»»åŠ¡ > process.nextTick > å¾®ä»»åŠ¡ > å®ä»»åŠ¡ > äº‹ä»¶å¾ªç¯")])])}),[],!1,null,null,null);s.default=e.exports}}]);