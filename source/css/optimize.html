<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CSS渲染原理和优化策略 | 跬步千里</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/images/icon.png">
    <meta name="description" content="前端工程师的进阶之路">
    <meta charset="UTF-8">
    <meta http-quiv="X-UA-Compatible" cotent="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="preload" href="/assets/css/0.styles.a9751e9e.css" as="style"><link rel="preload" href="/assets/js/app.1ce777fa.js" as="script"><link rel="preload" href="/assets/js/5.f3f9bc8f.js" as="script"><link rel="preload" href="/assets/js/17.78db7fcf.js" as="script"><link rel="preload" href="/assets/js/4.6792afd8.js" as="script"><link rel="prefetch" href="/assets/js/1.182dd2e0.js"><link rel="prefetch" href="/assets/js/10.fb9db25e.js"><link rel="prefetch" href="/assets/js/11.b45cb294.js"><link rel="prefetch" href="/assets/js/12.cb73d5a4.js"><link rel="prefetch" href="/assets/js/13.f3fe3a9f.js"><link rel="prefetch" href="/assets/js/14.d2d7b2b8.js"><link rel="prefetch" href="/assets/js/15.83a03705.js"><link rel="prefetch" href="/assets/js/16.4cc6bafb.js"><link rel="prefetch" href="/assets/js/18.2e9a2ef4.js"><link rel="prefetch" href="/assets/js/19.6ecf296b.js"><link rel="prefetch" href="/assets/js/20.c529823c.js"><link rel="prefetch" href="/assets/js/21.2b52d0c2.js"><link rel="prefetch" href="/assets/js/22.7f3b5e82.js"><link rel="prefetch" href="/assets/js/23.4ce64b61.js"><link rel="prefetch" href="/assets/js/24.5254c5bc.js"><link rel="prefetch" href="/assets/js/25.4fdb6932.js"><link rel="prefetch" href="/assets/js/26.2746f2f1.js"><link rel="prefetch" href="/assets/js/27.18f22661.js"><link rel="prefetch" href="/assets/js/28.653a793f.js"><link rel="prefetch" href="/assets/js/29.7d0b19e9.js"><link rel="prefetch" href="/assets/js/3.0d3a5a00.js"><link rel="prefetch" href="/assets/js/6.3c0ec666.js"><link rel="prefetch" href="/assets/js/7.79300a8b.js"><link rel="prefetch" href="/assets/js/8.81985c49.js"><link rel="prefetch" href="/assets/js/9.b2c4a0a6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a9751e9e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><!----> <header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <img src="/images/logo.jpeg" alt="跬步千里" class="logo can-hide" style="border-radius: 50%;"> <span class="site-name can-hide">跬步千里</span> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/source/css/optimize.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  CSS
</a></div><div class="nav-item"><a href="/source/js/eventloop.html" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/source/vue/pinia.html" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/source/engineering/nginx.html" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="https://github.com/Mr-Tsang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/source/css/optimize.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  CSS
</a></div><div class="nav-item"><a href="/source/js/eventloop.html" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/source/vue/pinia.html" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/source/engineering/nginx.html" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="https://github.com/Mr-Tsang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>CSS</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/source/css/optimize.html" aria-current="page" class="active sidebar-link">CSS渲染原理和优化策略</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/source/css/optimize.html#_1-浏览器" class="sidebar-link">1. 浏览器</a></li><li class="sidebar-sub-header"><a href="/source/css/optimize.html#_2-css基础" class="sidebar-link">2. CSS基础</a></li><li class="sidebar-sub-header"><a href="/source/css/optimize.html#_3-优化策略" class="sidebar-link">3. 优化策略</a></li></ul></li><li><a href="/source/css/gulp.html" class="sidebar-link">gulp之CSS文件去重</a></li><li><a href="/source/css/render.html" class="sidebar-link">IFC/BFC</a></li><li><a href="/source/css/dom.html" class="sidebar-link">真实DOM和虚拟DOM</a></li><li><a href="/source/css/reflux.html" class="sidebar-link">重绘和回流</a></li></ul></section></li></ul> </aside> <div class="theme-container__inner"><section class="main-container"><div class="page-left"><div sidebar-items="[object Object]" class="article" data-v-1697259b><div class="article-detail" data-v-1697259b><header class="post-header" data-v-1697259b><div class="post-title" data-v-1697259b><h1 data-v-1697259b>CSS渲染原理和优化策略</h1></div> <div class="post-meta" data-v-1697259b><div class="post-time" data-v-1697259b><i aria-hidden="true" class="fa fa-calendar" data-v-1697259b></i> <time data-v-1697259b>2023-3-1</time></div> <div class="article-footer" data-v-e06d3056 data-v-1697259b><div class="article-category" data-v-e06d3056><div class="article-category-custom" data-v-e06d3056><span data-v-e06d3056><a data-v-e06d3056><i aria-hidden="true" class="fa fa-folder-o" data-v-e06d3056></i>
                    CSS
                </a></span></div></div> <div class="article-tags" data-v-e06d3056><div class="article-tag blue" data-v-e06d3056><a href class="tag-name" data-v-e06d3056><i aria-hidden="true" class="fa fa-tag" data-v-e06d3056></i> <span data-v-e06d3056>渲染</span></a></div><div class="article-tag black" data-v-e06d3056><a href class="tag-name" data-v-e06d3056><i aria-hidden="true" class="fa fa-tag" data-v-e06d3056></i> <span data-v-e06d3056>优化</span></a></div></div></div></div></header> <div class="article-content" data-v-1697259b><div class="theme-default-content content__default" data-v-1697259b><h2 id="_1-浏览器"><a href="#_1-浏览器" class="header-anchor">#</a> 1. 浏览器</h2> <h3 id="_1-1-浏览器各部分简介"><a href="#_1-1-浏览器各部分简介" class="header-anchor">#</a> 1.1 浏览器各部分简介</h3> <ul><li>用户界面：浏览器输入框、浏览器前进按钮、书签，历史记录等</li> <li>浏览器引擎：浏览器各个部分之间相互通信的核心；在用户界面和渲染引擎之间传送指令，在客户端本地缓存中读写数据</li> <li>渲染引擎(排版引擎)：解析DOM文档和CSS规则，并将内容排版到浏览器中；浏览器内核主要指的就是渲染引擎，例如webkit内核，css在打包时候，会在属性前加上各个浏览器内核的前缀</li> <li>网络功能模块(network)</li> <li>JS引擎：解释和执行 JS 脚本部分，例如 V8 引擎</li> <li>UI后端：用于绘制基本的浏览器窗口内控件，比如组合选择框、按钮、输入框等</li> <li>数据持久化存储：数据持久化存储，涉及 Cookie、LocalStorage</li></ul> <h3 id="_1-2-浏览器渲染引擎"><a href="#_1-2-浏览器渲染引擎" class="header-anchor">#</a> 1.2 浏览器渲染引擎</h3> <p>渲染引擎属于浏览器的重要部分，HTML parser生成DOM树（当然存在JS引擎的作用），CSS parser生成Style Rules(CSSOM树)，两者结合，生成Render Tree树，结合layout绘制在屏幕上。</p> <h2 id="_2-css基础"><a href="#_2-css基础" class="header-anchor">#</a> 2. CSS基础</h2> <h3 id="_2-1-css的特性"><a href="#_2-1-css的特性" class="header-anchor">#</a> 2.1 CSS的特性</h3> <h4 id="优先级"><a href="#优先级" class="header-anchor">#</a> 优先级</h4> <p><img src="/images/css/css-1.png" alt=""></p> <p>!important &gt; 行内样式(权重1000) &gt; ID 选择器(权重 100) &gt; 类选择 器(权重 10) &gt; 标签(权重1) &gt; 通配符 &gt; 继承 &gt; 浏览器默认属性</p> <h4 id="继承"><a href="#继承" class="header-anchor">#</a> 继承</h4> <ul><li>继承属性即从外层元素获得的css属性</li> <li>继承的优先级最低，仅仅高于浏览器默认属性</li> <li>只要元素本身有同属性的样式定义，就可以覆盖掉继承值</li> <li>存在多个继承样式时，就近原则。也就是说，层级关系距离当前元 素最近的父级元素的继承样式，具有相对最高的优先级</li></ul> <p>可以继承的属性:字体、对齐、缩进、文本、颜色、可见性等
<img src="/images/css/css-2.png" alt=""></p> <h4 id="层叠性-组合"><a href="#层叠性-组合" class="header-anchor">#</a> 层叠性（组合）</h4> <p>css多个样式来源，导致了层叠性。
CSS 层叠性是指 CSS 样式在针对同一元素配置同一属性时，依据层叠规则(权 重)来处理冲突，选择应用权重高的 CSS 选择器所指定的属性，一般也被描述 为权重高的覆盖权重低的，因此也称作层叠。</p> <ul><li>两个类选择器（权重一样），后面的覆盖前面的</li> <li>计算权重，权重相同的情况下，后者生效</li> <li>权重较大的生效</li></ul> <h3 id="_2-2-css语法解析过程"><a href="#_2-2-css语法解析过程" class="header-anchor">#</a> 2.2 CSS语法解析过程</h3> <ul><li>HTML解析器生成DOM树，然后CSS 解析器将解析结果附加在DOM 树上</li> <li>CSS 文件会被解析成 StyleSheet 对象，且每个对象都包含 CSS 规 则。CSS 规则对象则包含选择器和声明对象，以及其他与 CSS 语法对应的 对象</li></ul> <h3 id="_2-3-css选择器执行顺序"><a href="#_2-3-css选择器执行顺序" class="header-anchor">#</a> 2.3 CSS选择器执行顺序</h3> <p>渲染引擎解析 CSS 选择器时是从右往左解析.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jartto<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span> 111 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span> 222 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span> 333 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>yellow<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span> 444 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">div &gt; div.jartto p span.yellow</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>假设【从左到右】解析：效率低</p> <ol><li>先找到所有 div 节点；</li> <li>在 div 节点内找到所有的子 div，并且是 class = “jartto”；</li> <li>然后再依次匹配 p span.yellow 等情况；</li> <li>遇到不匹配的情况，就必须回溯到一开始搜索的 div 或者 p 节点，然后
去搜索下个节点，重复这样的过程。</li></ol> <p>【从右向左】的方式进行解析，浏览器 CSS 匹配核心算法的规则是以从右向左方式匹配节点的：</p> <ol><li>首先就查找到 class=“yellow” 的 span 元素；</li> <li>接着检测父节点是否为 p 元素，如果不是则进入同级其他节点的遍历， 1. 首先就查找到 class=“yellow” 的 span 元素。 如果是则继续匹配父节点满足 class=“jartto” 的 div 容器；</li> <li>这样就又减少了集合的元素，只有符合当前的子规则才会匹配再上一条子规则。</li></ol> <blockquote><p>注意:在书写 CSS Selector 时，从右向左的 Selector Term 匹配节点越少越好。</p></blockquote> <h3 id="_2-4-高效的computedstyle"><a href="#_2-4-高效的computedstyle" class="header-anchor">#</a> 2.4 高效的computedStyle</h3> <ul><li>computedstyle:指的是应用在该元素上的所有样式，包含继承自浏览器或者父级元素的属性</li> <li>window.getComputedStyle(elem,null),返回该元素上所有属性列表</li> <li>在特定情况下，浏览器会共享 Computed Style，网页中能共享的标签非常多，所以能极大的提升执行效率</li> <li>如果两个或多个 Element 的 ComputedStyle 不通过计算可以确认他们 相等，那么这些 ComputedStyle 相等的 Elements 只会计算一次样式，其 余的仅仅共享该 ComputedStyle</li></ul> <p>如何高效共享 Computed Style:</p> <ol><li>TagName 和 Class 属性必须一样</li> <li>不能有 Style 属性。哪怕 Style 属性相等，他们也不共享</li> <li>不能使用 Sibling selector(兄弟选择器)，譬如: first-child、 :last-selector、 + selector</li> <li>mappedAttribute 必须相等</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 不能共享·上述规则2 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span>red</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>jartto's<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span>red</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>blog<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 可以共享·上述规则4 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>middle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>jartto's<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>middle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>blog<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>总结:避免行内样式也就是style属性，如非必要不写兄弟选择器</p></blockquote> <h3 id="_2-5-css书写顺序对性能的影响"><a href="#_2-5-css书写顺序对性能的影响" class="header-anchor">#</a> 2.5 CSS书写顺序对性能的影响</h3> <p>浏览器并不是一定获取到css样式就开始解析，会根据css样式的书写顺序将之按照DOM树的结构分布渲染样式，然后开始遍历每个树节点的CSS样式进行解析，此时的CSS样式遍历 顺序完全是按照之前的书写顺序。</p> <p>在解析过程中，一旦浏览器发现某个元素的定位变化影响布局，则需要倒回去重新渲染。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span>150px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span>16px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>浏览器解析到position的时候，发现该元素是绝对定位元素，需要脱离文档流，之前是按照普通元素进行解析的，所以需要重新渲染.
渲染引擎首先解除该元素在文档中所占位置，这就导致了该元素的占位情况发生了变化，其他元素可能会受到它回流的影响而重新排位。
调整代码👇</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span><span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span>150px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span>16px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里有一个规范，建议顺序大致👇</p> <ol><li>定位属性</li></ol> <div class="language- extra-class"><pre class="language-text"><code>position display float left top right bottom overflow
clear z-index
</code></pre></div><ol start="2"><li>自身属性</li></ol> <div class="language- extra-class"><pre class="language-text"><code>width height padding border margin background
</code></pre></div><ol start="3"><li>文字样式</li></ol> <div class="language- extra-class"><pre class="language-text"><code>font-family font-size font-style font-weight
font-varient color
</code></pre></div><ol start="4"><li>文本属性</li></ol> <div class="language- extra-class"><pre class="language-text"><code>text-align vertical-align text-wrap text-transform
text-indent text-decoration letter-spacing
word-spacing white-space text-overflow
</code></pre></div><ol start="5"><li>CSS3新增属性</li></ol> <div class="language- extra-class"><pre class="language-text"><code>content box-shadow border-raduis transform
</code></pre></div><h2 id="_3-优化策略"><a href="#_3-优化策略" class="header-anchor">#</a> 3. 优化策略</h2> <p>从浏览器构成，渲染引擎，再到 CSS 的解析原理，最后到执行顺序，做了一系列的探索。了解了一系列浏览器执行css原理，便于在实际应用中更好的书写出较为规范的css代码。</p> <h3 id="_3-1-使用-id-selector-非常的高效"><a href="#_3-1-使用-id-selector-非常的高效" class="header-anchor">#</a> 3.1 使用 id selector 非常的高效</h3> <p>在使用 id selector 的时候需要注意一点:因为 id 是唯一的，所以不需要既指定 id 又指定 tagName</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* Bad */</span>
<span class="token selector">p#id1</span> <span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span>

<span class="token comment">/* Good */</span>
<span class="token selector">#id1</span> <span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-2-避免深层次的-node"><a href="#_3-2-避免深层次的-node" class="header-anchor">#</a> 3.2 避免深层次的 node</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* Bad */</span>
<span class="token selector">div &gt; div &gt; div &gt; p</span> <span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span>

<span class="token comment">/* Good */</span>
<span class="token selector">p‐class</span><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-3-不要使用-attribute-selector"><a href="#_3-3-不要使用-attribute-selector" class="header-anchor">#</a> 3.3 不要使用 attribute selector</h3> <p>如:p[att1=&quot;val1&quot;]，这样的匹配非常慢。更不要这样写: p[id=&quot;id1&quot;],这样将 id selector 退化成 attribute selector。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* Bad */</span>
<span class="token selector">p[id=&quot;jartto&quot;]</span><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">p[class=&quot;blog&quot;]</span><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span>

<span class="token comment">/* Good */</span>
<span class="token selector">#jartto</span><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.blog</span><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-4-将浏览器前缀置于前面-将标准样式属性置于最后"><a href="#_3-4-将浏览器前缀置于前面-将标准样式属性置于最后" class="header-anchor">#</a> 3.4 将浏览器前缀置于前面，将标准样式属性置于最后</h3> <p>webpack打包插件已经处理过，暂时不需要做多重匹配，类似这种👇</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.foo</span> <span class="token punctuation">{</span>
    <span class="token property">‐moz‐border‐radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token property">border‐radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-5-遵守csslint规则"><a href="#_3-5-遵守csslint规则" class="header-anchor">#</a> 3.5 遵守CSSLint规则</h3> <ul><li>font‐faces：不能使用超过5个web字体</li> <li>import：禁止使用@import</li> <li>regex‐selectors：禁止使用属性选择器中的正则表达式选择器</li> <li>universal‐selector：禁止使用不规范的属性选择器</li> <li>zero‐units：0后面不要加单位</li> <li>overqualified‐elements：使用相邻选择器时，不要使用不必要的选择器</li> <li>shorthand：简写样式属性</li> <li>duplicate‐background‐images：相同的url在样式表中不超过一次</li></ul> <h3 id="_3-6-减少css文档体积"><a href="#_3-6-减少css文档体积" class="header-anchor">#</a> 3.6 减少CSS文档体积</h3> <ul><li>移除空的CSS规则</li> <li>值为0不需要单位</li> <li>使用缩写</li> <li>属性值为浮动小数0.xx，可以省略小数点之前的0</li> <li>不给h1-h6元素定义过多的样式</li></ul> <h3 id="_3-7-css-will-change"><a href="#_3-7-css-will-change" class="header-anchor">#</a> 3.7 CSS Will Change</h3> <p>WillChange属性，允许作者提前告知浏览器的默认样式，使用一个专用的属性来通知浏览器留意接下来的变化，从而优化和分配内存。</p> <p>will-change 以针对可能在悬停时更改的元素进行优化</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.el:hover</span><span class="token punctuation">{</span>
    <span class="token property">will-change</span><span class="token punctuation">:</span>transform<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>...<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-8-不要使用-import"><a href="#_3-8-不要使用-import" class="header-anchor">#</a> 3.8 不要使用@import</h3> <p>使用@import引入CSS会<strong>影响浏览器的并行下载</strong>。</p> <p>使用@import引用的CSS文件只有在引用它的那个CSS文件被下载、解析之后，浏览器才会知道还有另一个CSS需要下载，这时才去下载，然后下载后开始解析、构建Render Tree等一系列操作。</p> <p>多个@import会导致下载顺序紊乱。在IE中，@import会引发资源文件的下载顺序被打乱，即排列在@import后面的JS文件先于@import下载，并且打乱甚至破坏@import自身的并行下载。</p> <h3 id="_3-9-避免过分回流-重排-reflow"><a href="#_3-9-避免过分回流-重排-reflow" class="header-anchor">#</a> 3.9 避免过分回流/重排（Reflow）</h3> <p>浏览器重新计算布局位置与大小。</p> <p>常见的重排元素：</p> <ul><li>width</li> <li>height</li> <li>min-height</li> <li>padding</li> <li>margin</li> <li>display</li> <li>border-width</li> <li>border</li> <li>position</li> <li>top</li> <li>left</li> <li>right</li> <li>bottom</li> <li>float</li> <li>clear</li> <li>overflow</li> <li>font-size</li> <li>font-weight</li> <li>font-family</li> <li>line-height</li> <li>vertical-align</li> <li>text-align</li> <li>white-space</li></ul> <h3 id="_3-10-高效利用-computedstyle"><a href="#_3-10-高效利用-computedstyle" class="header-anchor">#</a> 3.10 高效利用 computedStyle</h3> <ul><li>公共类</li> <li>慎用ChildSelector</li> <li>尽可能共享</li></ul> <h3 id="_3-11-减少昂贵属性"><a href="#_3-11-减少昂贵属性" class="header-anchor">#</a> 3.11 减少昂贵属性</h3> <p>当页面发生重绘时，它们会降低浏览器的渲染性能。所以在编写CSS时，我们应该尽量减少使用昂贵属性，👇：</p> <ul><li>box-shadow</li> <li>border-radius</li> <li>filter</li> <li>:nth-child</li></ul> <h3 id="_3-12-依赖继承"><a href="#_3-12-依赖继承" class="header-anchor">#</a> 3.12 依赖继承</h3> <p>如果某些属性可以继承，那么自然没必要在写一遍</p> <h3 id="_3-13-遵守css顺序规则"><a href="#_3-13-遵守css顺序规则" class="header-anchor">#</a> 3.13 遵守CSS顺序规则</h3></div> <div class="last-updated" data-v-1697259b><span class="prefix" data-v-1697259b>上次更新：</span> <span class="time" data-v-1697259b>2023/4/3 上午11:07:07</span></div></div> <div class="pagination-wrapper" data-v-567cdefa data-v-1697259b><!----> <!----></div> <div class="valine-body" data-v-f35afe60 data-v-1697259b><div id="valine-vuepress-comment" data-v-f35afe60></div></div></div></div></div></section></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:#fff;box-shadow:0 1px 8px 0 rgba(0, 0, 0, 0.1);display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 跬步千里
    </div> <div class="operation" style="right:90px;bottom:40px;display:none;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:none;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><div class="Sakura" data-v-248d85d6><canvas id="canvas_sakura" style="z-index:100;" data-v-248d85d6></canvas></div><div></div><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/assets/js/app.1ce777fa.js" defer></script><script src="/assets/js/5.f3f9bc8f.js" defer></script><script src="/assets/js/17.78db7fcf.js" defer></script><script src="/assets/js/4.6792afd8.js" defer></script>
  </body>
</html>
